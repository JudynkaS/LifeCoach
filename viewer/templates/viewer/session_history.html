{% extends 'base.html' %}
{% load static %}

{% block title %}Session History{% endblock %}

{% block content %}
<div class="center-box">
    <div class="card">
        <div class="card-body">
            <h1 class="page-title">Session History</h1>

            <p class="text-center text-muted">
                All times are shown in your timezone: <strong>{{ timezone }}</strong>
            </p>

            <div class="text-end mb-3">
                <a href="{% url 'viewer:booking_create' %}" class="btn btn-success">
                    <i class="fas fa-plus-circle me-2"></i> New Reservation
                </a>
            </div>

            <div class="table-responsive">
                <table class="table table-striped align-middle text-center">
                    <thead>
                        <tr>
                            <th>Service</th>
                            <th>Client</th>
                            <th>Date and Time</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Meeting</th>
                            <th>Payment</th>
                            <th>Paid</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% if sessions %}
                            {% for session in sessions %}
                            <tr>
                                <td>{{ session.service.name }}</td>
                                <td>{{ session.client.get_full_name }}</td>
                                <td>{{ session.start_time }}</td>
                                <td>{{ session.get_type_display }}</td>
                                <td>{{ session.get_status_display }}</td>
                                <td>{{ session.meeting_url }}</td>
                                <td>{{ session.payment_status }}</td>
                                <td>{% if session.is_paid %}✔️{% else %}❌{% endif %}</td>
                            </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="8" class="text-muted">No sessions found.</td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %} 