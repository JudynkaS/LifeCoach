{% extends 'base.html' %}
{% block title %}
    {% if profile.is_coach %}
        Coach Profile - {{ profile.user.get_full_name|default:profile.user.username }}
    {% else %}
        Client Profile - {{ profile.user.get_full_name|default:profile.user.username }}
    {% endif %}
{% endblock %}

{% block card_container %}
    <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-8 col-xl-10">
            {% block card_content %}
            <div class="card page-card p-4">
                <div class="text-center mb-4">
                    <div class="avatar-container mb-3">
                        {% if profile.avatar %}
                            <img src="{{ profile.avatar.url }}" alt="Profile picture" class="avatar rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                        {% else %}
                            <div class="avatar-placeholder rounded-circle d-flex align-items-center justify-content-center" style="width: 120px; height: 120px; background-color: #e9ecef; font-size: 3rem;">
                                {{ profile.user.get_full_name|default:profile.user.username|make_list|first|upper }}
                            </div>
                        {% endif %}
                    </div>
                    <h3 class="h4 mb-2">{{ profile.user.get_full_name|default:profile.user.username }}</h3>
                    <div class="mb-3 text-center">
                        {% if profile.is_coach %}
                            <span class="badge bg-success" style="font-size:1rem;">COACH</span>
                        {% else %}
                            <span class="badge bg-info" style="font-size:1rem;">CLIENT</span>
                        {% endif %}
                    </div>
                </div>

                {% if profile.is_coach %}
                    <!-- Coach Profile Content -->
                    <div class="profile-content">
                        <h4 class="h5 mb-3 text-success">Contact Information</h4>
                        <dl class="row">
                            <dt class="col-sm-4">Email</dt>
                            <dd class="col-sm-8">{{ profile.user.email }}</dd>
                            <dt class="col-sm-4">Phone</dt>
                            <dd class="col-sm-8">{{ profile.phone|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">Preferred Contact</dt>
                            <dd class="col-sm-8">{{ profile.get_preferred_contact_display }}</dd>
                            <dt class="col-sm-4">Timezone</dt>
                            <dd class="col-sm-8">{{ profile.timezone }}</dd>
                        </dl>

                        {% if profile.specialization %}
                            <h4 class="h5 mb-3 text-success">Specialization</h4>
                            <p>{{ profile.specialization }}</p>
                        {% endif %}

                        <h4 class="h5 mb-3 text-success">About Me</h4>
                        <div class="mb-4">
                            {{ profile.bio|default:"No biography available"|linebreaks }}
                        </div>
                        {% if request.user.is_authenticated and request.user.profile.pk == profile.pk %}
                            <div class="mt-4">
                                <a href="{% url 'accounts:profile_edit' %}" class="btn btn-success">
                                    <i class="fas fa-edit me-2"></i>Edit Profile
                                </a>
                            </div>
                        {% endif %}
                    </div>
                {% else %}
                    <!-- Client Profile Content -->
                    <div class="profile-content">
                        <h4 class="h5 mb-3 text-success">Personal Information</h4>
                        <dl class="row">
                            <dt class="col-sm-4">Full Name</dt>
                            <dd class="col-sm-8">{{ profile.user.get_full_name }}</dd>
                            <dt class="col-sm-4">Email</dt>
                            <dd class="col-sm-8">{{ profile.user.email }}</dd>
                            <dt class="col-sm-4">Phone</dt>
                            <dd class="col-sm-8">{{ profile.phone|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">Date of Birth</dt>
                            <dd class="col-sm-8">{{ profile.date_of_birth|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">Sex</dt>
                            <dd class="col-sm-8">{{ profile.get_sex_display|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">Street Address</dt>
                            <dd class="col-sm-8">{{ profile.street_address|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">City</dt>
                            <dd class="col-sm-8">{{ profile.city|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">State</dt>
                            <dd class="col-sm-8">{{ profile.state|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">ZIP Code</dt>
                            <dd class="col-sm-8">{{ profile.zip_code|default:"Not provided" }}</dd>
                            <dt class="col-sm-4">Timezone</dt>
                            <dd class="col-sm-8">{{ profile.timezone }}</dd>
                            <dt class="col-sm-4">Preferred Contact</dt>
                            <dd class="col-sm-8">{{ profile.get_preferred_contact_display }}</dd>
                        </dl>

                        {% if profile.goals %}
                            <h4 class="h5 mb-3 text-success">Goals</h4>
                            <p>{{ profile.goals }}</p>
                        {% endif %}

                        {% if request.user.is_authenticated and request.user.profile.pk == profile.pk %}
                            <div class="mt-4">
                                <a href="{% url 'accounts:profile_edit' %}" class="btn btn-success">
                                    <i class="fas fa-edit me-2"></i>Edit Profile
                                </a>
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
            </div>
            {% endblock %}
        </div>
    </div>
{% endblock %} 